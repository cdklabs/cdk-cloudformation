# ~~ Generated by projen. To modify, edit .projenrc.js and run "npx projen".

name: build
on:
  pull_request: {}
  workflow_dispatch: {}
jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      checks: write
      contents: write
      actions: write
    env:
      CI: "true"
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          ref: ${{ github.event.pull_request.head.ref }}
          repository: ${{ github.event.pull_request.head.repo.full_name }}
      - name: Set git identity
        run: |-
          git config user.name "github-actions"
          git config user.email "github-actions@github.com"
      - name: Install dependencies
        run: yarn install --check-files --frozen-lockfile
      - name: build
        run: npx projen build
      - name: Check for changes
        id: git_diff
        run: git diff --exit-code || echo "::set-output name=has_changes::true"
      - if: steps.git_diff.outputs.has_changes
        name: Commit and push changes (if changed)
        run: 'git add . && git commit -m "chore: self mutation" && git push origin
          HEAD:${{ github.event.pull_request.head.ref }}'
      - if: steps.git_diff.outputs.has_changes
        name: Update status check (if changed)
        run: gh api -X POST /repos/${{ github.event.pull_request.head.repo.full_name
          }}/check-runs -F name="build" -F head_sha="$(git rev-parse HEAD)" -F
          status="completed" -F conclusion="success"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - if: steps.git_diff.outputs.has_changes
        name: Cancel workflow (if changed)
        run: gh api -X POST /repos/${{ github.event.pull_request.head.repo.full_name
          }}/actions/runs/${{ github.run_id }}/cancel
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  aqua-enterprise-enforcer:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:aqua-enterprise-enforcer
    container:
      image: jsii/superchain:1-buster-slim
  aqua-enterprise-kubeenforcer:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:aqua-enterprise-kubeenforcer
    container:
      image: jsii/superchain:1-buster-slim
  aqua-enterprise-scanner:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:aqua-enterprise-scanner
    container:
      image: jsii/superchain:1-buster-slim
  aqua-enterprise-server:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:aqua-enterprise-server
    container:
      image: jsii/superchain:1-buster-slim
  atlassian-opsgenie-integration:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:atlassian-opsgenie-integration
    container:
      image: jsii/superchain:1-buster-slim
  atlassian-opsgenie-team:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:atlassian-opsgenie-team
    container:
      image: jsii/superchain:1-buster-slim
  atlassian-opsgenie-user:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:atlassian-opsgenie-user
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-checkpoint-cloudguardqs-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-checkpoint-cloudguardqs-module
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-ec2-linuxbastionqs-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-ec2-linuxbastionqs-module
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-eks-cluster:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-eks-cluster
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-iridium-cloudconnectqs-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-iridium-cloudconnectqs-module
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-kubernetes-get:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-kubernetes-get
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-kubernetes-helm:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-kubernetes-helm
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-kubernetes-resource:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-kubernetes-resource
    container:
      image: jsii/superchain:1-buster-slim
  awsqs-vpc-vpcqs-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:awsqs-vpc-vpcqs-module
    container:
      image: jsii/superchain:1-buster-slim
  datadog-dashboards-dashboard:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:datadog-dashboards-dashboard
    container:
      image: jsii/superchain:1-buster-slim
  datadog-integrations-aws:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:datadog-integrations-aws
    container:
      image: jsii/superchain:1-buster-slim
  datadog-monitors-downtime:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:datadog-monitors-downtime
    container:
      image: jsii/superchain:1-buster-slim
  datadog-monitors-monitor:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:datadog-monitors-monitor
    container:
      image: jsii/superchain:1-buster-slim
  datadog-slos-slo:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:datadog-slos-slo
    container:
      image: jsii/superchain:1-buster-slim
  fireeye-cloudintegrations-cloudwatch:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:fireeye-cloudintegrations-cloudwatch
    container:
      image: jsii/superchain:1-buster-slim
  generic-database-schema:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:generic-database-schema
    container:
      image: jsii/superchain:1-buster-slim
  generic-transcribe-vocabulary:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:generic-transcribe-vocabulary
    container:
      image: jsii/superchain:1-buster-slim
  gremlin-agent-helm:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:gremlin-agent-helm
    container:
      image: jsii/superchain:1-buster-slim
  jfrog-artifactory-core-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:jfrog-artifactory-core-module
    container:
      image: jsii/superchain:1-buster-slim
  jfrog-artifactory-ec2instance-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:jfrog-artifactory-ec2instance-module
    container:
      image: jsii/superchain:1-buster-slim
  jfrog-artifactory-existingvpc-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:jfrog-artifactory-existingvpc-module
    container:
      image: jsii/superchain:1-buster-slim
  jfrog-artifactory-newvpc-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:jfrog-artifactory-newvpc-module
    container:
      image: jsii/superchain:1-buster-slim
  jfrog-linux-bastion-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:jfrog-linux-bastion-module
    container:
      image: jsii/superchain:1-buster-slim
  jfrog-vpc-multiaz-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:jfrog-vpc-multiaz-module
    container:
      image: jsii/superchain:1-buster-slim
  jfrog-xray-ec2instance-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:jfrog-xray-ec2instance-module
    container:
      image: jsii/superchain:1-buster-slim
  logzio-autodeploymentlogzio-cloudwatch-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:logzio-autodeploymentlogzio-cloudwatch-module
    container:
      image: jsii/superchain:1-buster-slim
  logzio-awscostandusage-cur-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:logzio-awscostandusage-cur-module
    container:
      image: jsii/superchain:1-buster-slim
  logzio-awssecurityhub-collector-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:logzio-awssecurityhub-collector-module
    container:
      image: jsii/superchain:1-buster-slim
  logzio-kinesisshipper-kinesisshipper-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:logzio-kinesisshipper-kinesisshipper-module
    container:
      image: jsii/superchain:1-buster-slim
  logzio-myservice-myname-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:logzio-myservice-myname-module
    container:
      image: jsii/superchain:1-buster-slim
  mongodb-atlas-cluster:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:mongodb-atlas-cluster
    container:
      image: jsii/superchain:1-buster-slim
  mongodb-atlas-databaseuser:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:mongodb-atlas-databaseuser
    container:
      image: jsii/superchain:1-buster-slim
  mongodb-atlas-networkpeering:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:mongodb-atlas-networkpeering
    container:
      image: jsii/superchain:1-buster-slim
  mongodb-atlas-project:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:mongodb-atlas-project
    container:
      image: jsii/superchain:1-buster-slim
  mongodb-atlas-projectipaccesslist:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:mongodb-atlas-projectipaccesslist
    container:
      image: jsii/superchain:1-buster-slim
  snyk-container-helm:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:snyk-container-helm
    container:
      image: jsii/superchain:1-buster-slim
  splunk-enterprise-quickstart-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:splunk-enterprise-quickstart-module
    container:
      image: jsii/superchain:1-buster-slim
  spot-elastigroup-group:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:spot-elastigroup-group
    container:
      image: jsii/superchain:1-buster-slim
  stackery-open-bastion-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:stackery-open-bastion-module
    container:
      image: jsii/superchain:1-buster-slim
  stocks-orders-marketorder:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:stocks-orders-marketorder
    container:
      image: jsii/superchain:1-buster-slim
  symphonia-opensource-cloudformationartifactsbucket-module:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:symphonia-opensource-cloudformationartifactsbucket-module
    container:
      image: jsii/superchain:1-buster-slim
  sysdig-helm-agent:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:sysdig-helm-agent
    container:
      image: jsii/superchain:1-buster-slim
  tf-ad-computer:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-ad-computer
    container:
      image: jsii/superchain:1-buster-slim
  tf-ad-user:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-ad-user
    container:
      image: jsii/superchain:1-buster-slim
  tf-aws-keypair:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-aws-keypair
    container:
      image: jsii/superchain:1-buster-slim
  tf-aws-s3bucket:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-aws-s3bucket
    container:
      image: jsii/superchain:1-buster-slim
  tf-aws-s3bucketobject:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-aws-s3bucketobject
    container:
      image: jsii/superchain:1-buster-slim
  tf-azuread-application:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-azuread-application
    container:
      image: jsii/superchain:1-buster-slim
  tf-azuread-user:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-azuread-user
    container:
      image: jsii/superchain:1-buster-slim
  tf-cloudflare-record:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-cloudflare-record
    container:
      image: jsii/superchain:1-buster-slim
  tf-digitalocean-droplet:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-digitalocean-droplet
    container:
      image: jsii/superchain:1-buster-slim
  tf-github-repository:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-github-repository
    container:
      image: jsii/superchain:1-buster-slim
  tf-google-storagebucket:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-google-storagebucket
    container:
      image: jsii/superchain:1-buster-slim
  tf-pagerduty-service:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-pagerduty-service
    container:
      image: jsii/superchain:1-buster-slim
  tf-random-string:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-random-string
    container:
      image: jsii/superchain:1-buster-slim
  tf-random-uuid:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:tf-random-uuid
    container:
      image: jsii/superchain:1-buster-slim
  trendmicro-cloudonecontainer-helm:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v2
      - run: yarn install
      - run: yarn build:trendmicro-cloudonecontainer-helm
    container:
      image: jsii/superchain:1-buster-slim
