{
  "Arn": "arn:aws:cloudformation:us-east-1::type/resource/a25d267c2b9b86b8d408fce3c7a4d94d34c90946/NetApp-FSxN-SnapMirror",
  "Type": "RESOURCE",
  "TypeName": "NetApp::FSxN::SnapMirror",
  "Description": "FSx for ONTAP provides SnapMirror, an embedded data replication technology that allows for the efficient transfer of data between two file systems. SnapMirror replicates data by creating point-in-time copies of the data. It is used for data protection, disaster recovery, and business continuity by ensuring that up-to-date copies of data are available at remote locations. To use SnapMirror, you must set up cluster peering and SVM peering between the source and target FSx for ONTAP file systems. Once activated, you will need a preview key to consume this resource. Please reach out to Ng-fsx-cloudformation@netapp.com to get the key. To use this resource, you would need to first create the Link module.",
  "Schema": "{\n    \"typeName\": \"NetApp::FSxN::SnapMirror\",\n    \"description\": \"FSx for ONTAP provides SnapMirror, an embedded data replication technology that allows for the efficient transfer of data between two file systems. SnapMirror replicates data by creating point-in-time copies of the data. It is used for data protection, disaster recovery, and business continuity by ensuring that up-to-date copies of data are available at remote locations. To use SnapMirror, you must set up cluster peering and SVM peering between the source and target FSx for ONTAP file systems. Once activated, you will need a preview key to consume this resource. Please reach out to Ng-fsx-cloudformation@netapp.com to get the key. To use this resource, you would need to first create the Link module.\",\n    \"sourceUrl\": \"https://github.com/NetApp/NetApp-CloudFormation-FSx-ONTAP-provider\",\n    \"tagging\": {\n        \"taggable\": false\n    },\n    \"definitions\": {\n        \"SecretSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"SecretArn\": {\n                    \"description\": \"The ARN of the secret stored in AWS Secrets Manager.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^arn:aws(-(cn|us-gov))?:secretsmanager:(([a-z]+-)+[0-9])?:([0-9]{12})?:secret:[^.]+$\"\n                },\n                \"SecretKey\": {\n                    \"description\": \"Reference for the SecretKey. The actual password is stored in AWS Secret Manager.\",\n                    \"type\": \"string\",\n                    \"dependencies\": {\n                        \"SecretKey\": [\n                            \"SecretArn\"\n                        ]\n                    }\n                }\n            },\n            \"required\": [\n                \"SecretArn\",\n                \"SecretKey\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"PasswordSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Secret\": {\n                    \"description\": \"A reference to the source of the password, typically an AWS Secrets Manager secret.\",\n                    \"$ref\": \"#/definitions/SecretSource\"\n                }\n            },\n            \"required\": [\n                \"Secret\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"FsxnDestination\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"FsxAdminPasswordSource\": {\n                    \"description\": \"The password source for the FSx admin user.\",\n                    \"$ref\": \"#/definitions/PasswordSource\"\n                },\n                \"FileSystemId\": {\n                    \"description\": \"The file system ID of the Amazon FSx for NetApp ONTAP file system in which the resource is created.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^(fs-[0-9a-f]{8,18})$\"\n                },\n                \"LinkArn\": {\n                    \"description\": \"The ARN of the AWS Lambda function that will be invoked to manage the resource.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^arn:aws(-(cn|us-gov))?:lambda:(([a-z]+-)+[0-9])?:([0-9]{12})?:function:[^.]+$\"\n                }\n            },\n            \"required\": [\n                \"FsxAdminPasswordSource\",\n                \"FileSystemId\",\n                \"LinkArn\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"NameWithUuidRef\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Name\": {\n                    \"description\": \"The name part of the reference, which can be used to identify resources such as SVM.\",\n                    \"type\": \"string\"\n                },\n                \"UUID\": {\n                    \"description\": \"The UUID part of the reference, which can be used to identify resources such as SVM.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"oneOf\": [\n                {\n                    \"required\": [\"Name\"]\n                },\n                {\n                    \"required\": [\"UUID\"]\n                }\n            ],\n            \"additionalProperties\": false\n        },\n        \"Endpoint\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"SVM\": {\n                    \"description\": \"The SVM identifier.\",\n                    \"$ref\": \"#/definitions/NameWithUuidRef\"\n                },\n                \"Volume\": {\n                    \"description\": \"The volume name within the SVM.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"required\": [\n                \"SVM\",\n                \"Volume\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"SnapMirrorDestinationCreation\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Aggregates\": {\n                    \"description\": \"List of aggregate names that host the volume.\",\n                    \"type\": \"array\",\n                    \"uniqueItems\": true,\n                    \"insertionOrder\": false,\n                    \"items\": {\n                        \"type\": \"string\"\n                    },\n                    \"minItems\": 1\n                }\n            },\n            \"required\": [\n                \"Aggregates\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"HealthyStatus\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Healthy\": {\n                    \"description\": \"Indicates whether the relationship is healthy.\",\n                    \"type\": \"boolean\"\n                },\n                \"UnhealthyReason\": {\n                    \"description\": \"Reason the relationship is not healthy.\",\n                    \"type\": \"array\",\n                    \"insertionOrder\": false,\n                    \"items\": {\n                        \"type\": \"string\"\n                    }\n                }\n            },\n            \"additionalProperties\": false\n        }\n    },\n    \"properties\": {\n        \"FsxAdminPasswordSource\": {\n            \"description\": \"The password source for the FSx admin user.\",\n            \"$ref\": \"#/definitions/PasswordSource\"\n        },\n        \"FileSystemId\": {\n            \"description\": \"The file system ID of the Amazon FSx for NetApp ONTAP file system in which the resource is created.\",\n            \"type\": \"string\",\n            \"pattern\": \"^(fs-[0-9a-f]{8,18})$\"\n        },\n        \"LinkArn\": {\n            \"description\": \"The ARN of the AWS Lambda function that will be invoked to manage the resource.\",\n            \"type\": \"string\",\n            \"pattern\": \"^arn:aws(-(cn|us-gov))?:lambda:(([a-z]+-)+[0-9])?:([0-9]{12})?:function:[^.]+$\"\n        },\n        \"FsxnDestinationInfo\": {\n            \"description\": \"The destination information for the Cluster Peer relationship.\",\n            \"$ref\": \"#/definitions/FsxnDestination\"\n        },\n        \"UUID\": {\n            \"description\": \"The UUID of the SnapMirror relationship.\",\n            \"type\": \"string\"\n        },\n        \"ID\": {\n            \"description\": \"A unique identifier used throughout the lifecycle of the SnapMirror relationship. Allows supporting actions such as reverse resync which creates a new UUID.\",\n            \"type\": \"string\"\n        },\n        \"SnapMirrorSourceEndpoint\": {\n            \"description\": \"Source endpoint of a SnapMirror relationship.\",\n            \"$ref\": \"#/definitions/Endpoint\"\n        },\n        \"SnapMirrorEndpoint\": {\n            \"description\": \"Destination endpoint of a SnapMirror relationship.\",\n            \"$ref\": \"#/definitions/Endpoint\"\n        },\n        \"SnapMirrorDestinationCreation\": {\n            \"description\": \"Use this object to provision the destination endpoint when establishing a SnapMirror relationship for a volume. For FlexGroup SnapMirror relationships, the source and destination FlexGroups must be spread over the same number of aggregates with the same number of constituents per aggregate.\",\n            \"$ref\": \"#/definitions/SnapMirrorDestinationCreation\"\n        },\n        \"Policy\": {\n            \"description\": \"The SnapMirror policy to be used for the SnapMirror relationship.\",\n            \"type\": \"string\"\n        },\n        \"Throttle\": {\n            \"description\": \"Throttle, in KBs per second. This 'throttle' overrides the 'throttle' set on the SnapMirror relationship's policy. If neither of these are set, the throttle defaults to 0, which is interpreted as unlimited.\",\n            \"type\": \"number\",\n            \"minimum\": 0,\n            \"maximum\": 2147483648,\n            \"default\": 0\n        },\n        \"TransferSchedule\": {\n            \"description\": \"Schedule used to update asynchronous relationships. This 'transfer_schedule' overrides the 'transfer_schedule' set on the SnapMirror relationship's policy. Remove the property to revert. Only cron schedules are supported for SnapMirror.\",\n            \"type\": \"string\"\n        },\n        \"State\": {\n            \"description\": \"State of the relationship.\",\n            \"enum\": [\"broken_off\", \"paused\", \"snapmirrored\", \"uninitialized\", \"in_sync\", \"out_of_sync\", \"synchronizing\", \"expanding\"],\n            \"type\": \"string\"\n        },\n        \"StateAction\": {\n            \"description\": \"Setting state of the relationship. Can be set during modify only.\",\n            \"enum\": [\"broken_off\", \"paused\", \"snapmirrored\", \"in_sync\"],\n            \"type\": \"string\"\n        },\n        \"Reverse\": {\n            \"description\": \"Reverse the direction of relationship by making the source endpoint as the new destination endpoint and making the destination endpoint as the new source endpoint. Can be set during modify only.\",\n            \"type\": \"boolean\",\n            \"default\": false\n        },\n        \"SourcePath\": {\n            \"description\": \"Current source path of the relationship.\",\n            \"type\": \"string\"\n        },\n        \"DestinationPath\": {\n            \"description\": \"Current destination path of the relationship.\",\n            \"type\": \"string\"\n        },\n        \"HealthyStatus\": {\n            \"description\": \"The health status of the SnapMirror relationship.\",\n            \"$ref\": \"#/definitions/HealthyStatus\"\n        }\n    },\n    \"additionalProperties\": false,\n    \"required\": [\n        \"FsxAdminPasswordSource\",\n        \"FileSystemId\",\n        \"LinkArn\",\n        \"FsxnDestinationInfo\",\n        \"SnapMirrorSourceEndpoint\",\n        \"SnapMirrorEndpoint\",\n        \"Policy\"\n    ],\n    \"createOnlyProperties\": [\n        \"/properties/FileSystemId\",\n        \"/properties/FsxAdminPasswordSource\",\n        \"/properties/FsxnDestinationInfo/FileSystemId\",\n        \"/properties/FsxnDestinationInfo/FsxAdminPasswordSource\",\n        \"/properties/SnapMirrorSourceEndpoint\",\n        \"/properties/SnapMirrorEndpoint\",\n        \"/properties/SnapMirrorDestinationCreation\"\n    ],\n    \"writeOnlyProperties\": [\n        \"/properties/SnapMirrorDestinationCreation\",\n        \"/properties/StateAction\"\n    ],\n    \"readOnlyProperties\": [\n        \"/properties/ID\",\n        \"/properties/UUID\",\n        \"/properties/SourcePath\",\n        \"/properties/DestinationPath\",\n        \"/properties/State\",\n        \"/properties/HealthyStatus\",\n        \"/properties/SourcePath\",\n        \"/properties/DestinationPath\"\n    ],\n    \"primaryIdentifier\": [\n        \"/properties/FileSystemId\",\n        \"/properties/FsxnDestinationInfo/FileSystemId\",\n        \"/properties/ID\"\n    ],\n    \"typeConfiguration\": {\n        \"properties\": {\n            \"PreviewKey\": {\n                \"description\": \"A preview key is a generated key which is required to consume the resource once activated.\",\n                \"type\": \"string\"\n            }\n        },\n        \"additionalProperties\": false,\n        \"required\": [\n            \"PreviewKey\"\n        ]\n    },\n    \"handlers\": {\n        \"create\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"read\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"update\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"delete\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"list\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        }\n    }\n}\n",
  "ProvisioningType": "FULLY_MUTABLE",
  "DeprecatedStatus": "LIVE",
  "RequiredActivatedTypes": [],
  "Visibility": "PUBLIC",
  "SourceUrl": "https://github.com/NetApp/NetApp-CloudFormation-FSx-ONTAP-provider",
  "TimeCreated": "2025-01-01T08:45:25.618Z",
  "ConfigurationSchema": "{\n    \"properties\": {\n        \"PreviewKey\": {\n            \"description\": \"A preview key is a generated key which is required to consume the resource once activated.\",\n            \"type\": \"string\"\n        }\n    },\n    \"additionalProperties\": false,\n    \"required\": [\n        \"PreviewKey\"\n    ],\n    \"definitions\": {\n        \"SecretSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"SecretArn\": {\n                    \"description\": \"The ARN of the secret stored in AWS Secrets Manager.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^arn:aws(-(cn|us-gov))?:secretsmanager:(([a-z]+-)+[0-9])?:([0-9]{12})?:secret:[^.]+$\"\n                },\n                \"SecretKey\": {\n                    \"description\": \"Reference for the SecretKey. The actual password is stored in AWS Secret Manager.\",\n                    \"type\": \"string\",\n                    \"dependencies\": {\n                        \"SecretKey\": [\n                            \"SecretArn\"\n                        ]\n                    }\n                }\n            },\n            \"required\": [\n                \"SecretArn\",\n                \"SecretKey\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"PasswordSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Secret\": {\n                    \"description\": \"A reference to the source of the password, typically an AWS Secrets Manager secret.\",\n                    \"$ref\": \"#/definitions/SecretSource\"\n                }\n            },\n            \"required\": [\n                \"Secret\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"FsxnDestination\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"FsxAdminPasswordSource\": {\n                    \"description\": \"The password source for the FSx admin user.\",\n                    \"$ref\": \"#/definitions/PasswordSource\"\n                },\n                \"FileSystemId\": {\n                    \"description\": \"The file system ID of the Amazon FSx for NetApp ONTAP file system in which the resource is created.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^(fs-[0-9a-f]{8,18})$\"\n                },\n                \"LinkArn\": {\n                    \"description\": \"The ARN of the AWS Lambda function that will be invoked to manage the resource.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^arn:aws(-(cn|us-gov))?:lambda:(([a-z]+-)+[0-9])?:([0-9]{12})?:function:[^.]+$\"\n                }\n            },\n            \"required\": [\n                \"FsxAdminPasswordSource\",\n                \"FileSystemId\",\n                \"LinkArn\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"NameWithUuidRef\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Name\": {\n                    \"description\": \"The name part of the reference, which can be used to identify resources such as SVM.\",\n                    \"type\": \"string\"\n                },\n                \"UUID\": {\n                    \"description\": \"The UUID part of the reference, which can be used to identify resources such as SVM.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"oneOf\": [\n                {\n                    \"required\": [\n                        \"Name\"\n                    ]\n                },\n                {\n                    \"required\": [\n                        \"UUID\"\n                    ]\n                }\n            ],\n            \"additionalProperties\": false\n        },\n        \"Endpoint\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"SVM\": {\n                    \"description\": \"The SVM identifier.\",\n                    \"$ref\": \"#/definitions/NameWithUuidRef\"\n                },\n                \"Volume\": {\n                    \"description\": \"The volume name within the SVM.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"required\": [\n                \"SVM\",\n                \"Volume\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"SnapMirrorDestinationCreation\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Aggregates\": {\n                    \"description\": \"List of aggregate names that host the volume.\",\n                    \"type\": \"array\",\n                    \"uniqueItems\": true,\n                    \"insertionOrder\": false,\n                    \"items\": {\n                        \"type\": \"string\"\n                    },\n                    \"minItems\": 1\n                }\n            },\n            \"required\": [\n                \"Aggregates\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"HealthyStatus\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Healthy\": {\n                    \"description\": \"Indicates whether the relationship is healthy.\",\n                    \"type\": \"boolean\"\n                },\n                \"UnhealthyReason\": {\n                    \"description\": \"Reason the relationship is not healthy.\",\n                    \"type\": \"array\",\n                    \"insertionOrder\": false,\n                    \"items\": {\n                        \"type\": \"string\"\n                    }\n                }\n            },\n            \"additionalProperties\": false\n        }\n    },\n    \"typeName\": \"NetApp::FSxN::SnapMirror\"\n}",
  "PublisherId": "a25d267c2b9b86b8d408fce3c7a4d94d34c90946",
  "LatestPublicVersion": "1.0.0",
  "IsActivated": false
}