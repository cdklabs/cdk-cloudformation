{
  "Arn": "arn:aws:cloudformation:us-east-1::type/resource/a25d267c2b9b86b8d408fce3c7a4d94d34c90946/NetApp-FSxN-SnapshotPolicy",
  "Type": "RESOURCE",
  "TypeName": "NetApp::FSxN::SnapshotPolicy",
  "Description": "A snapshot policy is a set of rules that specify when to create snapshots, how many copies to retain, and how to name them. A snapshot policy automatically creates and manages snapshots for a volume at defined intervals. The policy is used to simplify backup scheduling and maintain a reliable set of recovery points. Once activated, you will need a preview key to consume this resource. Please reach out to Ng-fsx-cloudformation@netapp.com to get the key. To use this resource, you would need to first create the Link module.",
  "Schema": "{\n    \"typeName\": \"NetApp::FSxN::SnapshotPolicy\",\n    \"description\": \"A snapshot policy is a set of rules that specify when to create snapshots, how many copies to retain, and how to name them. A snapshot policy automatically creates and manages snapshots for a volume at defined intervals. The policy is used to simplify backup scheduling and maintain a reliable set of recovery points. Once activated, you will need a preview key to consume this resource. Please reach out to Ng-fsx-cloudformation@netapp.com to get the key. To use this resource, you would need to first create the Link module.\",\n    \"sourceUrl\": \"https://github.com/NetApp/NetApp-CloudFormation-FSx-ONTAP-provider\",\n    \"tagging\": {\n        \"taggable\": false\n    },\n    \"definitions\": {\n        \"SecretSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"SecretArn\": {\n                    \"description\": \"The ARN of the secret stored in AWS Secrets Manager.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^arn:aws(-(cn|us-gov))?:secretsmanager:(([a-z]+-)+[0-9])?:([0-9]{12})?:secret:[^.]+$\"\n                },\n                \"SecretKey\": {\n                    \"description\": \"Reference for the SecretKey. The actual password is stored in AWS Secret Manager.\",\n                    \"type\": \"string\",\n                    \"dependencies\": {\n                        \"SecretKey\": [\n                            \"SecretArn\"\n                        ]\n                    }\n                }\n            },\n            \"required\": [\n                \"SecretArn\",\n                \"SecretKey\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"PasswordSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Secret\": {\n                    \"description\": \"A reference to the source of the password, typically an AWS Secrets Manager secret.\",\n                    \"$ref\": \"#/definitions/SecretSource\"\n                }\n            },\n            \"required\": [\n                \"Secret\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"SVM\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Name\": {\n                    \"description\": \"The name of the SVM.\",\n                    \"type\": \"string\"\n                },\n                \"UUID\": {\n                    \"description\": \"The UUID of the SVM.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"oneOf\": [\n                {\n                    \"required\": [\n                        \"Name\"\n                    ]\n                },\n                {\n                    \"required\": [\n                        \"UUID\"\n                    ]\n                }\n            ],\n            \"additionalProperties\": false\n        },\n        \"SnapshotPolicyCopy\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Count\": {\n                    \"description\": \"The number of snapshot copies to maintain for this schedule.\",\n                    \"type\": \"integer\",\n                    \"minimum\": 0,\n                    \"maximum\": 1023\n                },\n                \"ScheduleName\": {\n                    \"description\": \"Schedule name at which snapshot copies are captured on the volume.\",\n                    \"type\": \"string\"\n                },\n                \"Prefix\": {\n                    \"description\": \"The prefix to use while creating snapshot copies at regular intervals.\",\n                    \"type\": \"string\"\n                },\n                \"RetentionPeriod\": {\n                    \"description\": \"The retention period of snapshot copies for this schedule. The retention period value represents a duration and must be specified in the ISO-8601 duration format. The retention period can be in years, months, days, hours, and minutes. A period specified for years, months, and days is represented in the ISO-8601 format as 'PY', 'PM', 'PD' respectively, for example 'P10Y' represents a duration of 10 years. A duration in hours and minutes is represented by 'PTH' and 'PTM' respectively. The period string must contain only a single time element that is, either years, months, days, hours, or minutes. A duration which combines different periods is not supported, for example 'P1Y10M' is not supported.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^(P(\\\\d+Y|\\\\d+M|\\\\d+D|T\\\\d+H|T\\\\d+M))$\"\n                },\n                \"SnapmirrorLabel\": {\n                    \"description\": \"Label for SnapMirror operations. SnapMirror Label name must contain at least one character and must not contain leading or trailing white space.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"required\": [\n                \"Count\", \"ScheduleName\"\n            ],\n            \"additionalProperties\": false\n        }\n    },\n    \"properties\": {\n        \"FsxAdminPasswordSource\": {\n            \"description\": \"The password source for the FSx admin user.\",\n            \"$ref\": \"#/definitions/PasswordSource\"\n        },\n        \"FileSystemId\": {\n            \"description\": \"The file system ID of the Amazon FSx for NetApp ONTAP file system in which the resource is created.\",\n            \"type\": \"string\",\n            \"pattern\": \"^(fs-[0-9a-f]{8,18})$\"\n        },\n        \"LinkArn\": {\n            \"description\": \"The ARN of the AWS Lambda function that will be invoked to manage the resource.\",\n            \"type\": \"string\",\n            \"pattern\": \"^arn:aws(-(cn|us-gov))?:lambda:(([a-z]+-)+[0-9])?:([0-9]{12})?:function:[^.]+$\"\n        },\n        \"Name\": {\n            \"description\": \"The name of the snapshot policy.\",\n            \"type\": \"string\",\n            \"pattern\": \"^[a-zA-Z0-9_-]{1,256}$\"\n        },\n        \"UUID\": {\n            \"description\": \"The UUID of the snapshot policy.\",\n            \"type\": \"string\"\n        },\n        \"SVM\": {\n            \"description\": \"The SVM information associated with the snapshot policy.\",\n            \"$ref\": \"#/definitions/SVM\"\n        },\n        \"Copies\": {\n            \"description\": \"The snapshot copies that define the policy.\",\n            \"type\": \"array\",\n            \"insertionOrder\": false,\n            \"items\": {\n                \"$ref\": \"#/definitions/SnapshotPolicyCopy\"\n            },\n            \"minItems\": 1,\n            \"maxItems\": 5\n        }\n    },\n    \"additionalProperties\": false,\n    \"required\": [\n        \"FsxAdminPasswordSource\",\n        \"FileSystemId\",\n        \"LinkArn\",\n        \"Name\",\n        \"Copies\"\n    ],\n    \"createOnlyProperties\": [\n        \"/properties/FileSystemId\",\n        \"/properties/FsxAdminPasswordSource\",\n        \"/properties/SVM\",\n        \"/definitions/SnapshotPolicyCopy/Prefix\"\n    ],\n    \"readOnlyProperties\": [\n        \"/properties/UUID\"\n    ],\n    \"primaryIdentifier\": [\n        \"/properties/FileSystemId\",\n        \"/properties/UUID\"\n    ],\n    \"typeConfiguration\": {\n        \"properties\": {\n            \"PreviewKey\": {\n                \"description\": \"A preview key is a generated key which is required to consume the resource once activated.\",\n                \"type\": \"string\"\n            }\n        },\n        \"additionalProperties\": false,\n        \"required\": [\n            \"PreviewKey\"\n        ]\n    },\n    \"handlers\": {\n        \"create\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"read\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"update\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"delete\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        },\n        \"list\": {\n            \"permissions\": [\n                \"fsx:DescribeFileSystems\",\n                \"lambda:InvokeFunction\",\n                \"secretsmanager:GetSecretValue\"\n            ]\n        }\n    }\n}\n",
  "ProvisioningType": "FULLY_MUTABLE",
  "DeprecatedStatus": "LIVE",
  "RequiredActivatedTypes": [],
  "Visibility": "PUBLIC",
  "SourceUrl": "https://github.com/NetApp/NetApp-CloudFormation-FSx-ONTAP-provider",
  "TimeCreated": "2025-01-01T08:46:56.173Z",
  "ConfigurationSchema": "{\n    \"properties\": {\n        \"PreviewKey\": {\n            \"description\": \"A preview key is a generated key which is required to consume the resource once activated.\",\n            \"type\": \"string\"\n        }\n    },\n    \"additionalProperties\": false,\n    \"required\": [\n        \"PreviewKey\"\n    ],\n    \"definitions\": {\n        \"SecretSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"SecretArn\": {\n                    \"description\": \"The ARN of the secret stored in AWS Secrets Manager.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^arn:aws(-(cn|us-gov))?:secretsmanager:(([a-z]+-)+[0-9])?:([0-9]{12})?:secret:[^.]+$\"\n                },\n                \"SecretKey\": {\n                    \"description\": \"Reference for the SecretKey. The actual password is stored in AWS Secret Manager.\",\n                    \"type\": \"string\",\n                    \"dependencies\": {\n                        \"SecretKey\": [\n                            \"SecretArn\"\n                        ]\n                    }\n                }\n            },\n            \"required\": [\n                \"SecretArn\",\n                \"SecretKey\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"PasswordSource\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Secret\": {\n                    \"description\": \"A reference to the source of the password, typically an AWS Secrets Manager secret.\",\n                    \"$ref\": \"#/definitions/SecretSource\"\n                }\n            },\n            \"required\": [\n                \"Secret\"\n            ],\n            \"additionalProperties\": false\n        },\n        \"SVM\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Name\": {\n                    \"description\": \"The name of the SVM.\",\n                    \"type\": \"string\"\n                },\n                \"UUID\": {\n                    \"description\": \"The UUID of the SVM.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"oneOf\": [\n                {\n                    \"required\": [\n                        \"Name\"\n                    ]\n                },\n                {\n                    \"required\": [\n                        \"UUID\"\n                    ]\n                }\n            ],\n            \"additionalProperties\": false\n        },\n        \"SnapshotPolicyCopy\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"Count\": {\n                    \"description\": \"The number of snapshot copies to maintain for this schedule.\",\n                    \"type\": \"integer\",\n                    \"minimum\": 0,\n                    \"maximum\": 1023\n                },\n                \"ScheduleName\": {\n                    \"description\": \"Schedule name at which snapshot copies are captured on the volume.\",\n                    \"type\": \"string\"\n                },\n                \"Prefix\": {\n                    \"description\": \"The prefix to use while creating snapshot copies at regular intervals.\",\n                    \"type\": \"string\"\n                },\n                \"RetentionPeriod\": {\n                    \"description\": \"The retention period of snapshot copies for this schedule. The retention period value represents a duration and must be specified in the ISO-8601 duration format. The retention period can be in years, months, days, hours, and minutes. A period specified for years, months, and days is represented in the ISO-8601 format as 'PY', 'PM', 'PD' respectively, for example 'P10Y' represents a duration of 10 years. A duration in hours and minutes is represented by 'PTH' and 'PTM' respectively. The period string must contain only a single time element that is, either years, months, days, hours, or minutes. A duration which combines different periods is not supported, for example 'P1Y10M' is not supported.\",\n                    \"type\": \"string\",\n                    \"pattern\": \"^(P(\\\\d+Y|\\\\d+M|\\\\d+D|T\\\\d+H|T\\\\d+M))$\"\n                },\n                \"SnapmirrorLabel\": {\n                    \"description\": \"Label for SnapMirror operations. SnapMirror Label name must contain at least one character and must not contain leading or trailing white space.\",\n                    \"type\": \"string\"\n                }\n            },\n            \"required\": [\n                \"Count\",\n                \"ScheduleName\"\n            ],\n            \"additionalProperties\": false\n        }\n    },\n    \"typeName\": \"NetApp::FSxN::SnapshotPolicy\"\n}",
  "PublisherId": "a25d267c2b9b86b8d408fce3c7a4d94d34c90946",
  "LatestPublicVersion": "1.0.0",
  "IsActivated": false
}